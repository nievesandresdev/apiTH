version: '3'
services:
  api:
    build:
      context: .
      dockerfile: Dockerfile
    image: api:latest
    container_name: thehoster-app-api-backend
    restart: always
    volumes:
      - ../api:/var/www/html
      - ../api/vendor:/var/www/html/vendor
    ports:
      - "8001:80"
    networks:
      - hoster-db_hoster_network_test
    environment:
      DB_HOST: 10.0.2.4
      DB_PORT: 3307
      DB_USER: thehoster_test
      DB_PASSWORD: w2449daHK-n2T
      DB_DATABASE: hoster_db
    # Supervisord gestionar√° todos los procesos en este contenedor
    command: ["/usr/bin/supervisord", "-c", "/etc/supervisor/supervisord.conf"]

networks:
  hoster-db_hoster_network_test:
    external: true
